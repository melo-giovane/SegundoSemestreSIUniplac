CREATE DATABASE Mercado
USE Mercado
CREATE TABLE Clientes(
  id_cliente INT PRIMARY KEY NOT NULL auto_increment,
  nome VARCHAR(50) NOT NULL,
  cpf VARCHAR(11) NOT NULL
);

CREATE TABLE Cargos(
  id_cargo INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  nome VARCHAR(50) NOT NULL
);

CREATE TABLE Funcionarios(
  id_funcionario INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  nome VARCHAR(50) NOT NULL,
  cpf VARCHAR(11) NOT NULL,
  data_nascimento DATE NOT NULL,
  salario DECIMAL(10,2) NOT NULL,
  id_cargo INT NOT NULL,
  CONSTRAINT funcionario_cargo FOREIGN KEY(id_cargo)
    REFERENCES Cargos(id_cargo)
);

CREATE TABLE Fornecedores(
  id_fornecedor INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  nome VARCHAR(50) NOT NULL,
  cnpj VARCHAR(14) NOT NULL
);

CREATE TABLE Produtos(
  id_produto INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  nome VARCHAR(50) NOT NULL,
  lote VARCHAR(30) NOT NULL,
  data_vencimento DATE,
  valor_produto DECIMAL(10,2) NOT NULL,
  id_fornecedor INT NOT NULL,
  CONSTRAINT produto_fornecedor FOREIGN KEY (id_fornecedor)
    REFERENCES Fornecedores(id_fornecedor)
);

CREATE TABLE Vendas(
  id_venda INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  id_cliente INT NOT NULL,
  id_funcionario INT NOT NULL,
  data_compra DATETIME NOT NULL,
  valor_total DECIMAL(10,2) NOT NULL,
  CONSTRAINT venda_cliente FOREIGN KEY(id_cliente)
    REFERENCES Clientes(id_cliente),
  CONSTRAINT venda_funcionario FOREIGN KEY(id_funcionario)
	REFERENCES Funcionarios(id_funcionario)
);

CREATE TABLE ItensVendas(
  id_item INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
  id_venda INT NOT NULL,
  id_produto INT NOT NULL,
  quantidade INT NOT NULL,
  valor_item DECIMAL(10,2) NOT NULL,
  CONSTRAINT itemVenda_produto FOREIGN KEY(id_produto)
    REFERENCES Produtos(id_produto),
  CONSTRAINT item_vendas FOREIGN KEY(id_venda)
		REFERENCES Vendas(id_venda)   
);

